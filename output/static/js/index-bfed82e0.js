var xt=Object.defineProperty;var vt=(e,t,o)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var Q=(e,t,o)=>(vt(e,typeof t!="symbol"?t+"":t,o),o);const yt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}};yt();function $(){}function dt(e){return e()}function at(){return Object.create(null)}function N(e){e.forEach(dt)}function kt(e){return typeof e=="function"}function A(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function _t(e){return Object.keys(e).length===0}function $t(e,...t){if(e==null)return $;const o=e.subscribe(...t);return o.unsubscribe?()=>o.unsubscribe():o}function zt(e,t,o){e.$$.on_destroy.push($t(t,o))}function d(e,t){e.appendChild(t)}function _(e,t,o){e.insertBefore(t,o||null)}function k(e){e.parentNode.removeChild(e)}function Ct(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function b(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function y(){return Y(" ")}function Ot(){return Y("")}function j(e,t,o,r){return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)}function c(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function Et(e){return Array.from(e.childNodes)}function it(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function S(e,t){e.value=t==null?"":t}function Mt(e,t,o,r){o===null?e.style.removeProperty(t):e.style.setProperty(t,o,r?"important":"")}function St(e,t,{bubbles:o=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,o,r,t),i}let F;function P(e){F=e}function ut(){if(!F)throw new Error("Function called outside component initialization");return F}function pt(e){ut().$$.on_mount.push(e)}function st(){const e=ut();return(t,o,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const n=St(t,o,{cancelable:r});return i.slice().forEach(s=>{s.call(e,n)}),!n.defaultPrevented}return!0}}const B=[],E=[],X=[],et=[],ft=Promise.resolve();let ot=!1;function bt(){ot||(ot=!0,ft.then(gt))}function Z(){return bt(),ft}function rt(e){X.push(e)}function jt(e){et.push(e)}const tt=new Set;let V=0;function gt(){const e=F;do{for(;V<B.length;){const t=B[V];V++,P(t),Lt(t.$$)}for(P(null),B.length=0,V=0;E.length;)E.pop()();for(let t=0;t<X.length;t+=1){const o=X[t];tt.has(o)||(tt.add(o),o())}X.length=0}while(B.length);for(;et.length;)et.pop()();ot=!1,tt.clear(),P(e)}function Lt(e){if(e.fragment!==null){e.update(),N(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(rt)}}const G=new Set;let L;function qt(){L={r:0,c:[],p:L}}function Nt(){L.r||N(L.c),L=L.p}function q(e,t){e&&e.i&&(G.delete(e),e.i(t))}function T(e,t,o,r){if(e&&e.o){if(G.has(e))return;G.add(e),L.c.push(()=>{G.delete(e),r&&(o&&e.d(1),r())}),e.o(t)}}function Ht(e,t,o){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=o,o(e.$$.ctx[r]))}function W(e){e&&e.c()}function U(e,t,o,r){const{fragment:i,on_mount:n,on_destroy:s,after_update:w}=e.$$;i&&i.m(t,o),r||rt(()=>{const l=n.map(dt).filter(kt);s?s.push(...l):N(l),e.$$.on_mount=[]}),w.forEach(rt)}function R(e,t){const o=e.$$;o.fragment!==null&&(N(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function It(e,t){e.$$.dirty[0]===-1&&(B.push(e),bt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(e,t,o,r,i,n,s,w=[-1]){const l=F;P(e);const a=e.$$={fragment:null,ctx:null,props:n,update:$,not_equal:i,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:at(),dirty:w,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let u=!1;if(a.ctx=o?o(e,t.props||{},(f,p,...v)=>{const g=v.length?v[0]:p;return a.ctx&&i(a.ctx[f],a.ctx[f]=g)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](g),u&&It(e,f)),p}):[],a.update(),u=!0,N(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const f=Et(t.target);a.fragment&&a.fragment.l(f),f.forEach(k)}else a.fragment&&a.fragment.c();t.intro&&q(e.$$.fragment),U(e,t.target,t.anchor,t.customElement),gt()}P(l)}class K{$destroy(){R(this,1),this.$destroy=$}$on(t,o){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(o),()=>{const i=r.indexOf(o);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!_t(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const I=[];function ht(e,t=$){let o;const r=new Set;function i(w){if(A(e,w)&&(e=w,o)){const l=!I.length;for(const a of r)a[1](),I.push(a,e);if(l){for(let a=0;a<I.length;a+=2)I[a][0](I[a+1]);I.length=0}}}function n(w){i(w(e))}function s(w,l=$){const a=[w,l];return r.add(a),r.size===1&&(o=t(i)||$),w(e),()=>{r.delete(a),r.size===0&&(o(),o=null)}}return{set:i,update:n,subscribe:s}}let D=ht(0),nt=ht([{author:"0",body:"Hi there,  i'll answer in a few minutes :)"}]);function lt(e){let t,o;return{c(){t=b("div"),o=Y(e[0]),c(t,"class","tw-bg-red-600 tw-p-1 tw-px-2 tw-rounded-full tw-place-items-center tw-text-xs tw-font-semibold tw-text-white tw-absolute tw-top-0 tw-right-0")},m(r,i){_(r,t,i),d(t,o),e[5](t)},p(r,i){i&1&&it(o,r[0])},d(r){r&&k(t),e[5](null)}}}function Tt(e){let t,o,r,i,n,s,w,l,a=e[0]&&lt(e);return{c(){t=b("div"),o=b("div"),a&&a.c(),r=y(),i=b("div"),i.innerHTML='<img alt="bubble_icon" src="/static/images/bubbleicon.svg"/>',n=y(),s=b("div"),s.textContent="ok",c(i,"class","bubbleicon svelte-1k4k3rq"),c(i,"style",""),c(o,"class","bubble tw-grid tw-grid-cols-5 tw-gap-3 tw-bg-slate-200 tw-p-4 tw-rounded-full tw-place-items-center svelte-1k4k3rq"),c(t,"class","tw-max-w-sm tw-flex tw-flex-col tw-flex-auto tw-h-full tw-p-6"),c(s,"class","buuubble icon svelte-1k4k3rq")},m(u,f){_(u,t,f),d(t,o),a&&a.m(o,null),d(o,r),d(o,i),e[6](i),e[7](o),_(u,n,f),_(u,s,f),w||(l=j(o,"click",e[4]),w=!0)},p(u,[f]){u[0]?a?a.p(u,f):(a=lt(u),a.c(),a.m(o,r)):a&&(a.d(1),a=null)},i:$,o:$,d(u){u&&k(t),a&&a.d(),e[6](null),e[7](null),u&&k(n),u&&k(s),w=!1,l()}}}function At(e,t,o){let r;D.subscribe(p=>{o(0,r=p)});const i=st();let n,s,w,l=()=>{["icon"].map(p=>w.classList.toggle(p)),s&&["icon"].map(p=>s.classList.toggle(p)),["buuubble"].map(p=>n.classList.toggle(p)),setTimeout(()=>{["tw-rounded-full","tw-rounded-t-2xl"].map(p=>n.classList.toggle(p))},200),i("bubbling")};function a(p){E[p?"unshift":"push"](()=>{s=p,o(2,s)})}function u(p){E[p?"unshift":"push"](()=>{w=p,o(3,w)})}function f(p){E[p?"unshift":"push"](()=>{n=p,o(1,n)})}return[r,n,s,w,l,a,u,f]}class Bt extends K{constructor(t){super(),J(this,t,At,Tt,A,{})}}function wt(e,t,o){const r=e.slice();return r[4]=t[o],r}function Dt(e){let t,o,r,i,n,s,w=e[4].body+"",l,a;return{c(){t=b("div"),o=b("div"),r=b("div"),r.textContent="G",i=y(),n=b("div"),s=b("div"),l=Y(w),a=y(),c(r,"class","tw-flex tw-items-center tw-justify-center tw-h-10 tw-w-10 tw-rounded-full tw-bg-indigo-500 tw-flex-shrink-0"),c(n,"class","tw-relative tw-mr-3 tw-text-sm tw-bg-indigo-100 tw-py-2 tw-px-4 tw-shadow tw-rounded-xl"),c(o,"class","tw-flex tw-items-center tw-justify-start tw-flex-row-reverse"),c(t,"class","tw-col-start-1 tw-col-end-13 tw-p-3 tw-rounded-lg"),c(t,"tw-transition:fade","")},m(u,f){_(u,t,f),d(t,o),d(o,r),d(o,i),d(o,n),d(n,s),d(s,l),d(t,a)},p(u,f){f&2&&w!==(w=u[4].body+"")&&it(l,w)},d(u){u&&k(t)}}}function Pt(e){let t,o,r,i,n,s,w=e[4].body+"",l,a;return{c(){t=b("div"),o=b("div"),r=b("div"),r.textContent="S",i=y(),n=b("div"),s=b("div"),l=Y(w),a=y(),c(r,"class","tw-flex tw-items-center tw-justify-center tw-h-10 tw-w-10 tw-rounded-full tw-bg-indigo-500 tw-flex-shrink-0"),c(n,"class","tw-relative tw-ml-3 tw-text-sm tw-bg-white tw-py-2 tw-px-4 tw-shadow tw-rounded-xl"),c(o,"class","tw-flex tw-flex-row tw-items-center"),c(t,"class","tw-col-start-1 tw-col-end-13 tw-p-3 tw-rounded-lg"),c(t,"tw-transition:fade","")},m(u,f){_(u,t,f),d(t,o),d(o,r),d(o,i),d(o,n),d(n,s),d(s,l),d(t,a)},p(u,f){f&2&&w!==(w=u[4].body+"")&&it(l,w)},d(u){u&&k(t)}}}function ct(e){let t;function o(n,s){return n[4].author==="0"?Pt:Dt}let r=o(e),i=r(e);return{c(){i.c(),t=Ot()},m(n,s){i.m(n,s),_(n,t,s)},p(n,s){r===(r=o(n))&&i?i.p(n,s):(i.d(1),i=r(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){i.d(n),n&&k(t)}}}function Ft(e){let t,o,r,i=e[1],n=[];for(let s=0;s<i.length;s+=1)n[s]=ct(wt(e,i,s));return{c(){t=b("div"),o=b("div"),r=b("div");for(let s=0;s<n.length;s+=1)n[s].c();c(r,"class","tw-grid tw-grid-cols-12 tw-gap-y-2"),c(o,"class","tw-flex tw-flex-col tw-overflow-y-auto tw-max-h-80"),c(t,"class","tw-flex tw-flex-col tw-h-full tw-overflow-x-auto")},m(s,w){_(s,t,w),d(t,o),d(o,r);for(let l=0;l<n.length;l+=1)n[l].m(r,null);e[3](o)},p(s,[w]){if(w&2){i=s[1];let l;for(l=0;l<i.length;l+=1){const a=wt(s,i,l);n[l]?n[l].p(a,w):(n[l]=ct(a),n[l].c(),n[l].m(r,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=i.length}},i:$,o:$,d(s){s&&k(t),Ct(n,s),e[3](null)}}}function Ut(e,t,o){let r;zt(e,nt,w=>o(1,r=w));let i;function n(){i.scrollTo({top:i.scrollHeight,behavior:"smooth"})}pt(async()=>{n()});function s(w){E[w?"unshift":"push"](()=>{i=w,o(0,i)})}return[i,r,n,s]}class Rt extends K{constructor(t){super(),J(this,t,Ut,Ft,A,{scrollDown:2})}get scrollDown(){return this.$$.ctx[2]}}function Yt(e){let t,o,r,i,n,s,w,l,a,u,f,p,v,g,x,C,M,m,O,H;return{c(){t=b("div"),o=b("div"),r=b("div"),i=b("div"),n=b("form"),s=b("p"),s.textContent="Please fill in your name/email:",w=y(),l=b("div"),a=b("input"),u=y(),f=b("div"),p=b("input"),v=y(),g=b("div"),x=b("input"),C=y(),M=b("div"),m=b("button"),m.textContent="open chat",c(s,"class","tw-mb-4"),c(a,"type","text"),c(a,"class","form-control tw-block tw-w-full tw-px-3 tw-py-1.5 tw-text-base tw-font-normal tw-text-gray-700 tw-bg-white tw-bg-clip-padding tw-border tw-border-solid tw-border-gray-300 tw-rounded tw-transition tw-ease-in-out tw-m-0 focus:tw-text-gray-700 focus:tw-bg-white focus:tw-border-blue-600 focus:tw-outline-none"),c(a,"id","exampleFormControlInput1"),c(a,"placeholder","name"),c(l,"class","tw-mb-4"),c(p,"type","text"),c(p,"class","form-control tw-block tw-w-full tw-px-3 tw-py-1.5 tw-text-base tw-font-normal tw-text-gray-700 tw-bg-white tw-bg-clip-padding tw-border tw-border-solid tw-border-gray-300 tw-rounded tw-transition tw-ease-in-out tw-m-0 focus:tw-text-gray-700 focus:tw-bg-white focus:tw-border-blue-600 focus:tw-outline-none"),c(p,"id","exampleFormControlInput1"),c(p,"placeholder","surname"),c(f,"class","tw-mb-4"),c(x,"type","text"),c(x,"class","form-control tw-block tw-w-full tw-px-3 tw-py-1.5 tw-text-base tw-font-normal tw-text-gray-700 tw-bg-white tw-bg-clip-padding tw-border tw-border-solid tw-border-gray-300 tw-rounded tw-transition tw-ease-in-out tw-m-0 focus:tw-text-gray-700 focus:tw-bg-white focus:tw-border-blue-600 focus:tw-outline-none"),c(x,"id","exampleFormControlInput1"),c(x,"placeholder","email"),c(g,"class","tw-mb-4"),c(m,"class","tw-inline-block tw-px-6 tw-py-2.5 tw-text-white tw-font-medium tw-text-xs tw-leading-tight tw-uppercase tw-rounded tw-shadow-md hover:tw-bg-blue-700 hover:tw-shadow-lg focus:tw-shadow-lg focus:tw-outline-none focus:tw-ring-0 active:tw-shadow-lg tw-transition tw-duration-150 tw-ease-in-out tw-w-full tw-mb-3"),c(m,"type","button"),c(m,"data-mdb-ripple","true"),c(m,"data-mdb-ripple-color","light"),Mt(m,"background","linear-gradient( to right, #ee7724, #d8363a, #dd3675, #b44593 )"),c(M,"class","tw-text-center tw-pt-1 tw-mb-12 tw-pb-1"),c(i,"class","md:tw-p-5 md:tw-mx-5"),c(r,"class","lg:tw-w-full 2 tw-px-0 md:tw-px-0"),c(o,"class","lg:tw-flex lg:tw-flex-wrap g-0"),c(t,"class","tw-flex tw-flex-col tw-h-full tw-overflow-x-auto")},m(z,h){_(z,t,h),d(t,o),d(o,r),d(r,i),d(i,n),d(n,s),d(n,w),d(n,l),d(l,a),S(a,e[0].name),d(n,u),d(n,f),d(f,p),S(p,e[0].surname),d(n,v),d(n,g),d(g,x),S(x,e[0].email),d(n,C),d(n,M),d(M,m),O||(H=[j(a,"input",e[2]),j(p,"input",e[3]),j(x,"input",e[4]),j(m,"click",e[1])],O=!0)},p(z,[h]){h&1&&a.value!==z[0].name&&S(a,z[0].name),h&1&&p.value!==z[0].surname&&S(p,z[0].surname),h&1&&x.value!==z[0].email&&S(x,z[0].email)},i:$,o:$,d(z){z&&k(t),O=!1,N(H)}}}function Jt(e,t,o){const r={name:"",surname:"",email:""},i=st();let n=async a=>{const u=Object.keys(r).map(f=>encodeURIComponent(f)+"="+encodeURIComponent(r[f])).join("&");fetch("http://localhost:8000/session",{method:"POST",mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u}).then(f=>{if(console.log(f.status),f.status===0)i("sessiondone");else throw new Error("Network response was not OK")}).catch(f=>console.log(f))};function s(){r.name=this.value,o(0,r)}function w(){r.surname=this.value,o(0,r)}function l(){r.email=this.value,o(0,r)}return[r,n,s,w,l]}class Kt extends K{constructor(t){super(),J(this,t,Jt,Yt,A,{})}}class Vt{constructor(t){Q(this,"ws");Q(this,"store");this.store=t.store,this.callback=t.callback,this.ws=new WebSocket(t.url),this.ws.onopen=this.onOpen,this.ws.onmessage=o=>this.onMessage(o),this.ws.onerror=o=>this.onError(o),this.ws.onclose=o=>this.onClose(o)}onOpen(t){}onMessage(t,o){const r=o||this.store,i=JSON.parse(t.data);if(r.update(n=>[...n,i]),this.callback)for(let n of this.callback)n()}onError(t){}onClose(t){}sendData(t){this.ws.send(t)}}function Xt(e){let t,o,r,i,n,s,w,l,a,u,f,p,v,g,x,C,M={};return t=new Rt({props:M}),e[8](t),{c(){W(t.$$.fragment),o=y(),r=b("div"),i=b("div"),n=y(),s=b("div"),w=b("div"),l=b("input"),a=y(),u=b("button"),u.innerHTML='<svg class="tw-w-6 tw-h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',f=y(),p=b("div"),v=b("button"),v.innerHTML='<span class="tw-p-5px"><svg class="tw-w-4 tw-h-4 tw-transform tw-rotate-45 tw--mt-px" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></span>',c(l,"type","text"),c(l,"class","tw-flex tw-w-full tw-border tw-rounded-xl focus:tw-outline-none focus:tw-border-indigo-300 tw-pl-4 tw-pr-10 tw-h-10"),c(u,"class","tw-absolute tw-flex tw-items-center tw-justify-center tw-h-full tw-w-12 tw-right-0 tw-top-0 tw-text-gray-400 hover:tw-text-gray-600"),c(w,"class","tw-relative tw-w-full"),c(s,"class","tw-flex-grow"),c(v,"class","tw-flex tw-items-center tw-justify-center tw-bg-indigo-500 hover:tw-bg-indigo-600 tw-rounded-xl tw-text-white tw-px-4 tw-py-1 tw-flex-shrink-0"),c(p,"class","tw-ml-4"),c(r,"class","tw-flex tw-flex-row tw-items-center tw-h-16 tw-rounded-xl tw-bg-white tw-w-full tw-px-4")},m(m,O){U(t,m,O),_(m,o,O),_(m,r,O),d(r,i),d(r,n),d(r,s),d(s,w),d(w,l),S(l,e[2]),d(w,a),d(w,u),d(r,f),d(r,p),d(p,v),g=!0,x||(C=[j(l,"input",e[9]),j(l,"keydown",e[10]),j(v,"click",e[11])],x=!0)},p(m,O){const H={};t.$set(H),O&4&&l.value!==m[2]&&S(l,m[2])},i(m){g||(q(t.$$.fragment,m),g=!0)},o(m){T(t.$$.fragment,m),g=!1},d(m){e[8](null),R(t,m),m&&k(o),m&&k(r),x=!1,N(C)}}}function Gt(e){let t,o;return t=new Kt({}),t.$on("sessiondone",e[7]),{c(){W(t.$$.fragment)},m(r,i){U(t,r,i),o=!0},p:$,i(r){o||(q(t.$$.fragment,r),o=!0)},o(r){T(t.$$.fragment,r),o=!1},d(r){R(t,r)}}}function Wt(e){let t,o,r,i,n,s,w,l,a,u;const f=[Gt,Xt],p=[];function v(g,x){return g[3]?1:0}return s=v(e),w=p[s]=f[s](e),{c(){t=b("div"),o=b("div"),r=b("div"),r.innerHTML=`<div class="">...</div> 
        <div class="tw-col-start-2 tw-col-span-3 ">chat with me</div> 
        <div class="">x</div>`,i=y(),n=b("div"),w.c(),l=y(),a=b("div"),c(r,"class","tw-grid tw-grid-cols-5 tw-gap-3 tw-bg-slate-200 tw-p-4 tw-rounded-t-2xl tw-place-items-center"),c(n,"class","tw-flex tw-flex-col tw-flex-auto tw-flex-shrink-0 tw-rounded-b-2xl tw-bg-gray-100 tw-h-full tw-px-4 tw-pb-4"),c(o,"class","tw-max-w-sm tw-flex tw-flex-col tw-flex-auto tw-h-full tw-p-6 chatHidden svelte-1ybb335"),c(t,"class","tw-fixed msgbox svelte-1ybb335"),c(a,"class","grow svelte-1ybb335")},m(g,x){_(g,t,x),d(t,o),d(o,r),d(o,i),d(o,n),p[s].m(n,null),e[12](o),_(g,l,x),_(g,a,x),u=!0},p(g,[x]){let C=s;s=v(g),s===C?p[s].p(g,x):(qt(),T(p[C],1,1,()=>{p[C]=null}),Nt(),w=p[s],w?w.p(g,x):(w=p[s]=f[s](g),w.c()),q(w,1),w.m(n,null))},i(g){u||(q(w),u=!0)},o(g){T(w),u=!1},d(g){g&&k(t),p[s].d(),e[12](null),g&&k(l),g&&k(a)}}}function Qt(e,t,o){let{chatboxOpen:r}=t;const i=st();let n,s,w="",l,a,u;D.subscribe(h=>{u=h});let f=async()=>{await Z().then(()=>{r?D.set(0):D.update(h=>h+1),console.log(`unread: ${u}`)})},p=async()=>{await Z().then(s.scrollDown),console.log("works....")},v=()=>{a&&!n?n=new Vt({url:"ws://localhost:8000/entry",store:nt,callback:[p,f]}):console.log("Socket either connected or no session yet")};const g=async()=>{if(w==="")return;let h=JSON.stringify({author:"1",body:w});nt.update(mt=>[...mt,JSON.parse(h)]),n.sendData(h),await Z().then(p),i("newmessage"),o(2,w="")};let x=h=>{h!=null&&(r?(h.classList.add("grow"),h.classList.remove("chatHidden"),D.set(0)):(h.classList.remove("grow"),h.classList.add("chatHidden")),i("togglechat",{variable:"empty"}))};pt(()=>{o(3,a=document.cookie.match(/^(.*;)?\s*session_id\s*=\s*[^;]+(.*)?$/)),console.log(a),v()});const C=()=>o(3,a=!a)&&v();function M(h){E[h?"unshift":"push"](()=>{s=h,o(1,s)})}function m(){w=this.value,o(2,w)}const O=h=>h.key==="Enter"&&g(),H=()=>w!==""&&g();function z(h){E[h?"unshift":"push"](()=>{l=h,o(0,l)})}return e.$$set=h=>{"chatboxOpen"in h&&o(6,r=h.chatboxOpen)},e.$$.update=()=>{e.$$.dirty&65&&x(l)},[l,s,w,a,v,g,r,C,M,m,O,H,z]}class Zt extends K{constructor(t){super(),J(this,t,Qt,Wt,A,{chatboxOpen:6})}}function te(e){let t,o,r,i,n;t=new Bt({}),t.$on("bubbling",e[1]);function s(l){e[2](l)}let w={};return e[0]!==void 0&&(w.chatboxOpen=e[0]),r=new Zt({props:w}),E.push(()=>Ht(r,"chatboxOpen",s)),{c(){W(t.$$.fragment),o=y(),W(r.$$.fragment)},m(l,a){U(t,l,a),_(l,o,a),U(r,l,a),n=!0},p(l,[a]){const u={};!i&&a&1&&(i=!0,u.chatboxOpen=l[0],jt(()=>i=!1)),r.$set(u)},i(l){n||(q(t.$$.fragment,l),q(r.$$.fragment,l),n=!0)},o(l){T(t.$$.fragment,l),T(r.$$.fragment,l),n=!1},d(l){R(t,l),l&&k(o),R(r,l)}}}function ee(e,t,o){let r=!1;const i=()=>{o(0,r=!r)};function n(s){r=s,o(0,r)}return[r,i,n]}class oe extends K{constructor(t){super(),J(this,t,ee,te,A,{})}}new oe({target:document.getElementById("app")});
